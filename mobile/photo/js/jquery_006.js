(function(a){a.fn.fixPNG=function(){return this.each(function(){var l=a(this).css("backgroundImage");if(l.match(/^url\(["']?(.*\.png)["']?\)$/i)){l=RegExp.$1;a(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod="+(a(this).css("backgroundRepeat")=="no-repeat"?"crop":"scale")+", src='"+l+"')"}).each(function(){var m=a(this).css("position");if(m!="absolute"&&m!="relative"){a(this).css("position","relative")}})}})};var c,k,b=false,f=new Image,i,h=1,g=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i;var e=null,d=a.browser.msie&&a.browser.version.substr(0,1)==6&&!window.XMLHttpRequest,j=d||(a.browser.msie&&a.browser.version.substr(0,1)==7);a.fn.fancybox=function(A,C){var B=a.extend({},a.fn.fancybox.defaults,A);var z=this;if(B.itemArray.length>0){a.fn.fancybox.Items=B.itemArray}else{var y={};var D=a(z);for(var x=0;x<D.length;x++){var w=a(D[x]).attr("org");if(w==""||typeof w=="undefined"){w=a(D[x]).attr("src")}y={href:w.replace(/#.*/,""),title:D[x].title};if(!m(a.fn.fancybox.Items,y)){a.fn.fancybox.Items.push(y)}}}function m(o,F){for(var E=0;E<o.length;E++){if(o[E].href==F.href){return true}}return false}function p(){c=this;k=a.extend({},B);v();return false}function v(){if(b){return}if(a.isFunction(k.callbackOnStart)){k.callbackOnStart()}a.fn.fancybox.CurrentItemIndex=0;var o=a(c).attr("org");if(o==""||typeof o=="undefined"){o=a(c).attr("src")}while(a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].href!=o.replace(/#.*/,"")){a.fn.fancybox.CurrentItemIndex++}if(k.overlayShow){if(d){a("embed, object, select").css("visibility","hidden");a("#fancy_overlay").css("height",a(document).height())}a("#fancy_overlay").css({"background-color":k.overlayColor,opacity:k.overlayOpacity}).show()}a(window).bind("resize.fb scroll.fb",a.fn.fancybox.scrollBox);l()}function l(E){a("#fancy_right, #fancy_left, #fancy_close, #fancy_title").hide();if(typeof E=="undefined"){E=a.fn.fancybox.CurrentItemIndex}var o=a.fn.fancybox.Items[E].href.replace(/#.*/,"");if(o.match("iframe")||c.className.indexOf("iframe")>=0){a.fn.fancybox.showLoading();t('<iframe id="fancy_frame" onload="jQuery.fn.fancybox.showIframe()" name="fancy_iframe'+Math.round(Math.random()*1000)+'" frameborder="0" hspace="0" src="'+o+'"></iframe>',k.frameWidth,k.frameHeight)}else{if(o.match(/#/)){var F=window.location.href.split("#")[0];F=o.replace(F,"");F=F.substr(F.indexOf("#"));t('<div id="fancy_div">'+a(F).html()+"</div>",k.frameWidth,k.frameHeight)}else{if(o.match(g)){q(o)}else{a.fn.fancybox.showLoading();a.get(o,function(G){a("#fancy_loading").hide();t('<div id="fancy_ajax">'+G+"</div>",k.frameWidth,k.frameHeight)})}}}}function q(E){f=new Image;try{a(f).unbind("error").bind("error",function(){if(imgserver!=undefined&&cdnserver!=undefined){var F=f.src.replace(cdnserver,imgserver);if(F!=f.src){f.src=F}else{if(cdnserver+"/upload/defaultimages/default.jpg.430x320.jpg"!=f.src){f.src=cdnserver+"/upload/defaultimages/default.jpg.494x247.jpg"}}}else{f.src="//dw38l979td36g.cloudfront.net/upload/defaultimages/default.jpg.494x247.jpg"}})}catch(o){}f.src=E;if(f.complete){s()}else{a.fn.fancybox.showLoading();a(f).unbind("load").bind("load",function(){a("#fancy_loading").hide();s()})}}function s(){var J=(typeof f.naturalWidth!="undefined"&&f.naturalWidth!=0)?f.naturalWidth:f.width;var o=(typeof f.naturalHeight!="undefined"&&f.naturalHeight!=0)?f.naturalHeight:f.height;if(o==0||J==0){var F=new Image;F.src=f.src.replace("/org/","/");o=F.height;J=F.width;q(F.src)}var E=(k.padding*2)+40;var H=(k.padding*2)+60;var I=a.fn.fancybox.getViewport();if(k.imageScale&&(J>(I[0]-E)||o>(I[1]-H))){var G=Math.min(Math.min(I[0]-E,J)/J,Math.min(I[1]-H,o)/o);J=Math.round(G*J);o=Math.round(G*o)}t('<img alt="" id="fancy_img" src="'+f.src+'" />',J,o)}function r(){if((a.fn.fancybox.Items.length-1)>a.fn.fancybox.CurrentItemIndex){var o=a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex+1].href||false;if(o&&o.match(g)){objNext=new Image();objNext.src=o}}if(a.fn.fancybox.CurrentItemIndex>0){var o=a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex-1].href||false;if(o&&o.match(g)){objNext=new Image();objNext.src=o}}}function t(L,N,E){b=true;var K=k.padding;if(j||e){try{a("#fancy_content")[0].style.removeExpression("height");a("#fancy_content")[0].style.removeExpression("width")}catch(o){}}if(K>0){N+=K*2;E+=K*2;a("#fancy_content").css({top:K+"px",right:K+"px",bottom:K+"px",left:K+"px",width:"auto",height:"auto"});if(j||e){try{a("#fancy_content")[0].style.setExpression("height","(this.parentNode.clientHeight - "+K*2+")");a("#fancy_content")[0].style.setExpression("width","(this.parentNode.clientWidth - "+K*2+")")}catch(o){}}}else{a("#fancy_content").css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"})}if(a("#fancy_outer").is(":visible")&&N==a("#fancy_outer").width()&&E==a("#fancy_outer").height()){a("#fancy_content").fadeOut("fast",function(){a("#fancy_content").empty().append(a(L)).fadeIn("normal",function(){n()})});return}var M=a.fn.fancybox.getViewport();var H=(E+60)>M[1]?M[3]:(M[3]+Math.round((M[1]-E-60)*0.5));var F=(N+40)>M[0]?M[2]:(M[2]+Math.round((M[0]-N-40)*0.5));var G={left:F,top:H,width:N+"px",height:E+"px"};if(a("#fancy_outer").is(":visible")){a("#fancy_content").fadeOut("normal",function(){a("#fancy_content").empty();a("#fancy_outer").animate(G,k.zoomSpeedChange,k.easingChange,function(){a("#fancy_content").append(a(L)).fadeIn("normal",function(){n()})})})}else{if(k.zoomSpeedIn>0&&a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].orig!==undefined){a("#fancy_content").empty().append(a(L));var I=a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].orig;var J=a.fn.fancybox.getPosition(I);a("#fancy_outer").css({left:(J.left-20-k.padding)+"px",top:(J.top-20-k.padding)+"px",width:a(I).width()+(k.padding*2),height:a(I).height()+(k.padding*2)});if(k.zoomOpacity){G.opacity="show"}a("#fancy_outer").animate(G,k.zoomSpeedIn,k.easingIn,function(){n()})}else{a("#fancy_content").hide().empty().append(a(L)).show();a("#fancy_outer").css(G).fadeIn("normal",function(){n()})}}}function u(){a("#fancy_left").show();a("#fancy_right").show();if(a.fn.fancybox.CurrentItemIndex!==0){a("#fancy_left, #fancy_left_ico").unbind().bind("click",function(o){o.stopPropagation();a.fn.fancybox.CurrentItemIndex--;l();return false})}else{a("#fancy_left").hide();a("#fancy_left, #fancy_left_ico").unbind()}if(a.fn.fancybox.CurrentItemIndex!=(a.fn.fancybox.Items.length-1)){a("#fancy_right, #fancy_right_ico").unbind().bind("click",function(o){o.stopPropagation();a.fn.fancybox.CurrentItemIndex++;l();a("#fancy_right, #fancy_right_ico").attr("ItemCurrent",a.fn.fancybox.CurrentItemIndex);return false})}else{a("#fancy_right").hide();a("#fancy_right, #fancy_right_ico").unbind()}}function n(){if(a.browser.msie){a("#fancy_content")[0].style.removeAttribute("filter");a("#fancy_outer")[0].style.removeAttribute("filter")}u();r();a(document).bind("keydown.fb",function(E){if(E.keyCode==27&&k.enableEscapeButton){a.fn.fancybox.close()}else{if(E.keyCode==37&&a.fn.fancybox.CurrentItemIndex!==0){a(document).unbind("keydown.fb");a.fn.fancybox.CurrentItemIndex--;l()}else{if(E.keyCode==39&&a.fn.fancybox.CurrentItemIndex!=(a.fn.fancybox.Items.length-1)){a(document).unbind("keydown.fb");a.fn.fancybox.CurrentItemIndex++;l()}}}});if(k.hideOnContentClick){a("#fancy_content").click(a.fn.fancybox.close)}if(k.overlayShow&&k.hideOnOverlayClick){a("#fancy_overlay").bind("click",a.fn.fancybox.close)}if(k.showCloseButton){a("#fancy_close").bind("click",a.fn.fancybox.close).show()}if(typeof a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].title!=="undefined"&&a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].title.length>0){var o=a("#fancy_outer").position();a("#fancy_title div").text(a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].title).html();a("#fancy_title").css({top:o.top+a("#fancy_outer").outerHeight()-32,left:o.left+((a("#fancy_outer").outerWidth()*0.5)-(a("#fancy_title").width()*0.5))}).show()}if(k.overlayShow&&d){a("embed, object, select",a("#fancy_content")).css("visibility","visible")}if(a.isFunction(k.callbackOnShow)){k.callbackOnShow(a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex])}if(a.browser.msie){a("#fancy_outer")[0].style.removeAttribute("filter");a("#fancy_content")[0].style.removeAttribute("filter")}b=false;a(".bigImg.btnPage").hide()}if(C){return this.unbind("click.fb").bind("click.fb",p)}};a.fn.fancybox.scrollBox=function(){var o=a.fn.fancybox.getViewport();if(k.centerOnScroll&&a("#fancy_outer").is(":visible")){var m=a("#fancy_outer").outerWidth();var l=a("#fancy_outer").outerHeight();var n={top:(l>o[1]?o[3]:o[3]+Math.round((o[1]-l)*0.5)),left:(m>o[0]?o[2]:o[2]+Math.round((o[0]-m)*0.5))};a("#fancy_outer").css(n);a("#fancy_title").css({top:n.top+l-32,left:n.left+((m*0.5)-(a("#fancy_title").width()*0.5))})}if(d&&a("#fancy_overlay").is(":visible")){a("#fancy_overlay").css({height:a(document).height()})}if(a("#fancy_loading").is(":visible")){a("#fancy_loading").css({left:((o[0]-40)*0.5+o[2]),top:((o[1]-40)*0.5+o[3])})}};a.fn.fancybox.getNumeric=function(l,m){return parseInt(a.curCSS(l.jquery?l[0]:l,m,true))||0};a.fn.fancybox.getPosition=function(l){var m=l.offset();m.top+=a.fn.fancybox.getNumeric(l,"paddingTop");m.top+=a.fn.fancybox.getNumeric(l,"borderTopWidth");m.left+=a.fn.fancybox.getNumeric(l,"paddingLeft");m.left+=a.fn.fancybox.getNumeric(l,"borderLeftWidth");return m};a.fn.fancybox.showIframe=function(){a("#fancy_loading").hide();a("#fancy_frame").show()};a.fn.fancybox.getViewport=function(){return[a(window).width(),a(window).height(),a(document).scrollLeft(),a(document).scrollTop()]};a.fn.fancybox.animateLoading=function(){if(!a("#fancy_loading").is(":visible")){clearInterval(i);return}};a.fn.fancybox.showLoading=function(){clearInterval(i);var l=a.fn.fancybox.getViewport();a("#fancy_loading").css({left:((l[0]-40)*0.5+l[2]),top:((l[1]-40)*0.5+l[3])}).show();a("#fancy_loading").bind("click",a.fn.fancybox.close);i=setInterval(a.fn.fancybox.animateLoading,66)};a.fn.fancybox.close=function(){b=true;a(f).unbind();a(document).unbind("keydown.fb");a(window).unbind("resize.fb scroll.fb");a("#fancy_overlay, #fancy_content, #fancy_close").unbind();a("#fancy_close, #fancy_loading, #fancy_left, #fancy_right, #fancy_title").hide();__cleanup=function(){if(a("#fancy_overlay").is(":visible")){a("#fancy_overlay").fadeOut("fast")}a("#fancy_content").empty();if(k.centerOnScroll){a(window).unbind("resize.fb scroll.fb")}if(d){a("embed, object, select").css("visibility","visible")}if(a.isFunction(k.callbackOnClose)){k.callbackOnClose()}b=false};if(a("#fancy_outer").is(":visible")!==false){if(k.zoomSpeedOut>0&&a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].orig!==undefined){var m=a.fn.fancybox.Items[a.fn.fancybox.CurrentItemIndex].orig;var n=a.fn.fancybox.getPosition(m);var l={left:(n.left-20-k.padding)+"px",top:(n.top-20-k.padding)+"px",width:a(m).width()+(k.padding*2),height:a(m).height()+(k.padding*2)};if(k.zoomOpacity){l.opacity="hide"}a("#fancy_outer").stop(false,true).animate(l,k.zoomSpeedOut,k.easingOut,__cleanup)}else{a("#fancy_outer").stop(false,true).fadeOut("fast",__cleanup)}}else{__cleanup()}return false};a.fn.fancybox.build=function(){var m="";m+='<div class="adddiv">';m+='<div id="fancy_overlay"></div>';m+='<div id="fancy_loading"></div>';m+='<div id="fancy_outer">';m+='<div id="fancy_inner">';m+='<div id="fancy_close"></div>';m+='<div id="fancy_bg"><div class="fancy_bg" id="fancy_bg_n"></div><div class="fancy_bg" id="fancy_bg_ne"></div><div class="fancy_bg" id="fancy_bg_e"></div><div class="fancy_bg" id="fancy_bg_se"></div><div class="fancy_bg" id="fancy_bg_s"></div><div class="fancy_bg" id="fancy_bg_sw"></div><div class="fancy_bg" id="fancy_bg_w"></div><div class="fancy_bg" id="fancy_bg_nw"></div></div>';m+='<a href="javascript:;" id="fancy_left"><span class="fancy_ico" id="fancy_left_ico"></span></a><a href="javascript:;" id="fancy_right"><span class="fancy_ico" id="fancy_right_ico"></span></a>';m+='<div id="fancy_content"></div>';m+="</div>";m+="</div>";m+='<div id="fancy_title"></div>';m+="</div>";a(m).appendTo("body");a('<table cellspacing="0" cellpadding="0" border="0"><tr><td class="fancy_title" id="fancy_title_left"></td><td class="fancy_title" id="fancy_title_main"><div></div></td><td class="fancy_title" id="fancy_title_right"></td></tr></table>').appendTo("#fancy_title");if(a.browser.msie){a(".fancy_bg").fixPNG()}if(d){a("div#fancy_overlay").css("position","absolute");a("#fancy_close, .fancy_title, .fancy_ico").fixPNG();a("#fancy_inner").prepend('<iframe id="fancy_bigIframe" src="javascript:false;" scrolling="no" frameborder="0"></iframe>');var l=a("#fancy_bigIframe")[0].contentWindow.document;l.open();l.close()}};a.fn.fancybox.Items=[];a.fn.fancybox.CurrentItemIndex=0;a.fn.fancybox.defaults={padding:10,imageScale:true,zoomOpacity:true,zoomSpeedIn:0,zoomSpeedOut:0,zoomSpeedChange:300,easingIn:"swing",easingOut:"swing",easingChange:"swing",frameWidth:560,frameHeight:340,overlayShow:true,overlayOpacity:0.3,overlayColor:"#666",enableEscapeButton:true,showCloseButton:true,hideOnOverlayClick:true,hideOnContentClick:true,centerOnScroll:true,itemArray:[],callbackOnStart:null,callbackOnShow:null,callbackOnClose:null};a(document).ready(function(){e=a.browser.msie&&!a.boxModel;if(a("#fancy_outer").length<1){a.fn.fancybox.build()}})})(jQuery);
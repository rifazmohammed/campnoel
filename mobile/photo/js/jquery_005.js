jQuery.extend({historyCurrentHash:undefined,historyCallback:undefined,historyIframeSrc:undefined,historyInit:function(a,e){jQuery.historyCallback=a;if(e){jQuery.historyIframeSrc=e}var b=location.hash.replace(/\?.*$/,"");jQuery.historyCurrentHash=b;if((jQuery.browser.msie)&&(jQuery.browser.version<8)){if(jQuery.historyCurrentHash==""){jQuery.historyCurrentHash="#"}jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+(jQuery.historyIframeSrc?' src="'+jQuery.historyIframeSrc+'"':"")+"></iframe>");var d=jQuery("#jQuery_history")[0];var c=d.contentWindow.document;c.open();c.close();c.location.hash=b}else{if(jQuery.browser.safari){jQuery.historyBackStack=[];jQuery.historyBackStack.length=history.length;jQuery.historyForwardStack=[];jQuery.lastHistoryLength=history.length;jQuery.isFirst=true}}if(b){jQuery.historyCallback(b.replace(/^#/,""))}setInterval(jQuery.historyCheck,100)},historyAddHistory:function(a){jQuery.historyBackStack.push(a);jQuery.historyForwardStack.length=0;this.isFirst=true},historyCheck:function(){if((jQuery.browser.msie)&&(jQuery.browser.version<8)){var f=jQuery("#jQuery_history")[0];var e=f.contentDocument||f.contentWindow.document;var b=e.location.hash.replace(/\?.*$/,"");if(b!=jQuery.historyCurrentHash){location.hash=b;jQuery.historyCurrentHash=b;jQuery.historyCallback(b.replace(/^#/,""))}}else{if(jQuery.browser.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength){jQuery.historyBackStack.shift()}if(!jQuery.dontCheck){var c=history.length-jQuery.historyBackStack.length;jQuery.lastHistoryLength=history.length;if(c){jQuery.isFirst=false;if(c<0){for(var d=0;d<Math.abs(c);d++){jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop())}}else{for(var d=0;d<c;d++){jQuery.historyBackStack.push(jQuery.historyForwardStack.shift())}}var a=jQuery.historyBackStack[jQuery.historyBackStack.length-1];if(a!=undefined){jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,"");jQuery.historyCallback(a)}}else{if(jQuery.historyBackStack[jQuery.historyBackStack.length-1]==undefined&&!jQuery.isFirst){if(location.hash){var b=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var b="";jQuery.historyCallback("")}jQuery.isFirst=true}}}}else{var b=location.hash.replace(/\?.*$/,"");if(b!=jQuery.historyCurrentHash){jQuery.historyCurrentHash=b;jQuery.historyCallback(b.replace(/^#/,""))}}}},historyLoad:function(b){var e;b=decodeURIComponent(b.toString().replace(/\?.*$/,""));if(jQuery.browser.safari){e=b}else{e="#"+b;location.hash=e}jQuery.historyCurrentHash=e;if((jQuery.browser.msie)&&(jQuery.browser.version<8)){var d=jQuery("#jQuery_history")[0];var c=d.contentWindow.document;c.open();c.close();c.location.hash=e;jQuery.lastHistoryLength=history.length;jQuery.historyCallback(b)}else{if(jQuery.browser.safari){jQuery.dontCheck=true;this.historyAddHistory(b);var a=function(){jQuery.dontCheck=false};window.setTimeout(a,200);jQuery.historyCallback(b);location.hash=e}else{jQuery.historyCallback(b)}}}});